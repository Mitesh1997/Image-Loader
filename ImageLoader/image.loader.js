function Inode(src,next){if(src){this.src=src}if(next){this.next=next}this.img;this.loadImg=function(){if(this.src){this.img=new Image();this.img.src=this.src;return true}return false};this.toString=function(){return this.src}}function ImageLoader(){this.inode;this.loaded=0;this.amount=0;this.imageArray=new Array();this.i=0;this.addImage=function(src){var newInode=new Inode(src);if(this.inode){newInode.next=this.inode}this.inode=newInode;return newInode};this.setChain=function(srcs){this.inode=new Inode();var temp=this.inode;var i=0;for(;i<srcs.length;i++){var tNext=new Inode(srcs[i+1]);temp.src=srcs[i];if(tNext.src){temp.next=tNext;temp=temp.next}else{break}}this.amount=srcs.length;return};this.getLength=function(){var temp=this.inode;var res=1;if(!temp){return 0}while(temp.next){res++;temp=temp.next}return res};this.loadAll=function(){var _this=this;loadImg(this.inode,this);function loadImg(inode,_this){inode.loadImg();inode.img.onerror=function(){alert("An error occurs when loding image : "+inode.img.src);window.clearInterval(_this.i);return false};inode.img.onload=function(){_this.loaded++;if(inode.next&&inode.next.src){loadImg(inode.next,_this)}}}return true};this.traverse=function(func){var temp=this.inode;if(temp){func(temp)}while(temp.next){temp=temp.next;func(temp)}return};this.getImage=function(src){var temp=this.inode;if(temp.src===src){return temp.img}while(temp.next){if(temp.next.src===src){return temp.next.img}else{temp=temp.next}}return};this.deleteImage=function(src){var temp=this.inode;var res="not found";if(temp.src===src){this.inode=temp.next;res=this.inode}else{while(temp.next){if(temp.next.src===src){res=temp.next;temp.next=temp.next.next}else{temp=temp.next}}}return res};this.progress=function(){return this.amount!=0?Math.round((this.loaded/this.amount)*100):-1};this.progressStr=function(){return this.amount!=0?Math.round((this.loaded/this.amount)*100)+"%":"-"};this.extend=function(itvFunc,endFunc,timeUnit){var time=0;var _timeUnit=250;if(timeUnit){_timeUnit=timeUnit}var _this=this;_this.i=setInterval(function(){time++;itvFunc();if(_this.loaded>=_this.amount){window.clearInterval(_this.i);endFunc()}},_timeUnit);return}};